# CDTS - Crypto Day Trading System

## 策略概述

CDTS是一套基于多時間框架技術分析的加密貨幣日內波段交易系統,采用信號頻繁生成+多層篩選機制的設計哲學。

## 核心設計理念

### 1. 信號生成層次

策略不采用極度嚴苛的入場條件(導致信號過少),而是:
- 生成頻繁的初級信號
- 通過多層評分系統過濾虛假信號
- 保留高概率的交易機會

### 2. 評分機制(信號品質篩選)

#### 買入信號評分構成

基礎評分(0-7分):
- 4小時趨勢牛市(EMA50>EMA200): +1分
- 1小時趨勢牛市(EMA12>EMA50): +1分
- 價格接近BB下軌: +1分
- RSI超賣(<30)或Stochastic超賣(<20): +1分
- MACD牛市(線>信號線)或金叉: +1分
- EMA5在EMA20上方或向上交叉: +1分
- OBV趨勢向上: +1分

額外評分:
- 成交量確認(>前5日平均140%): +2分
- 價格上穿BB中軌: +2分
- ADX趨勢強度(>25): +1分

**總分範圍**: 0-13分

#### 賣出信號評分構成

基礎評分(0-7分):
- 4小時趨勢熊市(EMA50<EMA200): +1分
- 1小時趨勢熊市(EMA12<EMA50): +1分
- 價格接近BB上軌: +1分
- RSI超買(>70)或Stochastic超買(>80): +1分
- MACD熊市(線<信號線)或死叉: +1分
- EMA5在EMA20下方或向下交叉: +1分
- OBV趨勢向下: +1分

額外評分:
- 成交量確認(>前5日平均140%): +2分
- 價格下穿BB中軌: +2分
- ADX趨勢強度(>25): +1分

**總分範圍**: 0-13分

### 3. 信號篩選閾值

根據風險偏好調整:

| 模式 | 閾值 | 特點 |
|------|------|------|
| AGGRESSIVE(激進) | 2分 | 信號多,假突破多,適合高風險承受力 |
| BALANCED(平衡) | 3分 | 推薦預設,信號-收益平衡 |
| CONSERVATIVE(保守) | 5分 | 信號少但質量高,低失誤率 |

### 4. 最終入場確認條件

買入確認(全部必須滿足):
```
buy_signal_qualified AND price_cross_bb_mid_up
```
其中:
- `buy_signal_qualified` = 總評分 >= 閾值 AND BB寬度有效 AND 成交量確認
- `price_cross_bb_mid_up` = 價格上穿BB中軌(20日SMA)

賣出確認(全部必須滿足):
```
sell_signal_qualified AND price_cross_bb_mid_down
```
其中:
- `sell_signal_qualified` = 總評分 >= 閾值 AND BB寬度有效 AND 成交量確認
- `price_cross_bb_mid_down` = 價格下穿BB中軌(20日SMA)

## 參數配置說明

### 時間框架設置
- **4H Timeframe**: 4小時K線(確認主趨勢)
- **1H Timeframe**: 1小時K線(確認次級趨勢)
- **15M Timeframe**: 15分鐘K線(決策入場)

### EMA參數(推薦預設)
- **EMA5**: 短期趨勢反應
- **EMA12**: 1小時決策指標
- **EMA20**: 15分鐘入場確認
- **EMA50**: 1小時中期趨勢
- **EMA200**: 4小時主趨勢

### 布林通道(Bollinger Bands)
- **周期**: 20日
- **標準差**: 2.0
- **用途**: 超買超賣識別+入場確認

### RSI指標
- **周期**: 14
- **超賣**: <30
- **超買**: >70

### Stochastic指標
- **K周期**: 14
- **D周期**: 3
- **平滑**: 3
- **超賣**: <20
- **超買**: >80

### MACD指標
- **快線**: 12
- **慢線**: 26
- **信號線**: 9

### ATR風險管理
- **ATR周期**: 14
- **止損倍數**: 1.5倍ATR
- **止盈倍數**: 2.25倍ATR(保持1:1.5盈虧比)

### 成交量篩選
- **OBV EMA周期**: 20
- **成交量倍數**: 1.4倍(前5日平均)
- **用途**: 確認突破有效性

### 信號篩選敏感度
- **ADX閾值**: 25(趨勢強度)
- **BB寬度最小值**: 0.015(1.5% of close)
- **篩選模式**: AGGRESSIVE/BALANCED/CONSERVATIVE

## 使用步驟

### 1. 在TradingView添加策略
1. 打開TradingView
2. 進入Pine Script編輯器
3. 新建腳本
4. 複製cdts.pine全部代碼
5. 點擊"Add to Chart"

### 2. 圖表配置
1. 設置時間框架為15分鐘(推薦)
2. 選擇交易對(如BTCUSDT)
3. 確保有足夠的歷史數據(至少500根K線)

### 3. 參數調整
根據交易對和市場環境調整:
```
激進型(高頻交易): AGGRESSIVE模式
平衡型(推薦): BALANCED模式
保守型(低風險): CONSERVATIVE模式
```

### 4. 信號解讀
- **綠色上箭頭 + BUY標籤**: 買入信號確認
- **紅色下箭頭 + SELL標籤**: 賣出信號確認
- **EMA5(藍) vs EMA20(橙)**: 短期趨勢確認
- **灰色帶狀區域**: BB軌道

## 評分系統詳細示例

### 場景1: 強買入信號
```
時刻: 2026-01-16 14:30 UTC
4小時: EMA50(28450) > EMA200(27800) ✓ +1
1小時: EMA12(28300) > EMA50(28100) ✓ +1
BB位置: 價格28180 (接近下軌28100) ✓ +1
RSI: 25 (<30超賣) ✓ +1
MACD: 線在信號線上方 ✓ +1
EMA: EMA5(28150) > EMA20(28120) ✓ +1
OBV: 趨勢向上 ✓ +1
成交量: 45000 > 35000 (140%確認) ✓ +2
價格上穿BB中軌(20日SMA=28140) ✓ +2
ADX: 28 (>25強趨勢) ✓ +1
總評分: 14分 >= 3分閾值
結論: BUY信號確認
```

### 場景2: 弱買入信號
```
時刻: 2026-01-16 15:00 UTC
4小時: EMA50(28450) > EMA200(27800) ✓ +1
1小時: EMA12(28200) < EMA50(28150) ✗ 0
BB位置: 價格28200 (中軌上方) ✗ 0
RSI: 35 (正常區間) ✗ 0
MACD: 線剛好在信號線上方 ✓ +1
EMA: EMA5(28180) < EMA20(28190) ✗ 0
OBV: 趨勢混亂 ✗ 0
成交量: 30000 < 35000 ✗ 0
價格未穿BB中軌 ✗ 0
ADX: 18 (<25弱趨勢) ✗ 0
總評分: 2分 >= 3分閾值? NO
結論: 信號不確認,觀望
```

## 風險管理執行

### 止損計算
```
BUY交易:
入場價: 28200
ATR(14): 150
止損 = 28200 - (150 × 1.5) = 28200 - 225 = 27975

SELL交易:
入場價: 28200
ATR(14): 150
止損 = 28200 + (150 × 1.5) = 28200 + 225 = 28425
```

### 止盈計算
```
BUY交易:
入場價: 28200
ATR(14): 150
止盈 = 28200 + (150 × 2.25) = 28200 + 337.5 = 28537.5
盈虧比 = 337.5 / 225 = 1.5:1

SELL交易:
入場價: 28200
ATR(14): 150
止盈 = 28200 - (150 × 2.25) = 28200 - 337.5 = 27862.5
盈虧比 = 337.5 / 225 = 1.5:1
```

## Bitget交易所費用考慮

### 費用計算
```
進場費用(Taker): 0.06%
出場費用(Taker): 0.06%
往返總費用: 0.12%

示例計算:
交易金額: $1000
進場費用: 1000 × 0.0006 = $0.6
出場費用: 1000 × 0.0006 = $0.6
總費用: $1.2

止盈點位收益必須 > 1.2
```

## 交易監控清單

在執行每筆交易前檢查:

- [ ] 三層EMA對齊(4h+1h+15m確認)
- [ ] BB寬度有效(>1.5% of close)
- [ ] 成交量確認(>前5日平均140%)
- [ ] ADX有效(>25或禁用檢查)
- [ ] 價格成功穿過BB中軌
- [ ] 評分 >= 選定閾值
- [ ] 止損和止盈點位計算正確
- [ ] 重要新聞時間外(距離新聞>30分鐘)
- [ ] 日內虧損 < 本金2%
- [ ] 上一筆交易已完全結束

## 常見問題

### Q1: 為什麼信號這麼多?
A: 設計特意生成大量初級信號,通過評分系統篩選。如信號仍過多,調整到CONSERVATIVE模式。

### Q2: 虛假信號如何識別?
A: 當成交量未確認或BB寬度異常窄時,出現虛假突破。檢查volume_confirmed和bb_width_valid條件。

### Q3: 參數如何優化?
A: 基于回測數據:
- 增加EMA周期: 信號減少,假突破減少
- 降低閾值: 信號增加,虧損交易增加
- 調整ATR倍數: 改變止盈止損幅度

### Q4: 適用于哪些交易對?
A: 適用于主流交易對(BTC, ETH, 流動性充足的幣種)。不建議用於新幣或低流動性交易對。

### Q5: 最佳交易時間?
A: 24小時均可交易,但推薦高波動時段(歐美開盤時間)。

## 版本歷史

- **v1.0 (2026-01-16)**: 初始發佈,完整三層評分機制

## 免責聲明

本策略僅供教育用途,不構成投資建議。過去表現不代表未來結果。使用該策略交易需自行承擔全部風險。

## 支持與反饋

如有問題或改進建議,請提交Issue至GitHub倉庫。
